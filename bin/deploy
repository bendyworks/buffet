#!/usr/bin/env bash

# get the absolute path to the Buffet directory
relpath="$(dirname "$0")"
cd "$relpath/.."
export BUFFET_DIRECTORY="$(pwd)"

# link every dotfile in dotfiles/ into the user's home directory
# if a dotfile exists with that name, add the ".unused" extension
for dotfile in $BUFFET_DIRECTORY/dotfiles/*; do
  original="$HOME/.${dotfile##*/}"
  [ ! -h "$original" ] && mv "$original" "$original.unused" 2> /dev/null
  ln -fs "$dotfile" "$original"
done
